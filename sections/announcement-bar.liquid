{%- if section.settings.enable_utility_bar != false -%}
{%- liquid
  assign phone_number = section.settings.phone_number
  assign phone_link = phone_number | remove: ' ' | remove: '-' | remove: '(' | remove: ')' | remove: '/'
  assign studio_message = section.settings.studio_message
  assign workshops_link = section.settings.workshops_link
  assign workshops_text = section.settings.workshops_text | default: 'View Workshops'
-%}

<div class="utility-bar utility-bar--contact color-{{ section.settings.color_scheme }} gradient{% if section.settings.show_line_separator %} utility-bar--bottom-border{% endif %}">
  <div class="page-width utility-bar__contact-grid">
    
    {%- if phone_number != blank -%}
    <div class="utility-bar__phone">
      <a href="tel:{{ phone_link }}" class="utility-bar__phone-link focus-inset" aria-label="Call us at {{ phone_number }}">
        <span class="utility-bar__icon">
          {{- 'icon-phone.svg' | inline_asset_content -}}
        </span>
        <span class="utility-bar__phone-number">{{ phone_number }}</span>
      </a>
    </div>
    {%- endif -%}

    {%- if studio_message != blank -%}
    <div class="utility-bar__message">
      <span class="utility-bar__message-text">{{ studio_message }}</span>
    </div>
    {%- endif -%}

    {%- if workshops_link != blank -%}
    <div class="utility-bar__workshops">
      <a href="{{ workshops_link }}" class="utility-bar__workshops-link focus-inset">
        <span class="utility-bar__workshops-text">{{ workshops_text }}</span>
        <span class="utility-bar__workshops-arrow">
          {{- 'icon-arrow.svg' | inline_asset_content -}}
        </span>
      </a>
    </div>
    {%- endif -%}

  </div>
</div>

<style>
  .utility-bar--contact {
    padding: 0.8rem 0;
    min-height: 3.8rem;
  }

  .utility-bar__contact-grid {
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 2rem;
  }

  @media screen and (max-width: 749px) {
    .utility-bar__contact-grid {
      grid-template-columns: 1fr auto;
      gap: 1rem;
    }
  }

  .utility-bar__phone {
    display: flex;
    align-items: center;
  }

  .utility-bar__phone-link {
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    text-decoration: none;
    color: rgba(var(--color-foreground), 0.85);
    font-size: calc(var(--font-heading-scale) * 1.2rem);
    transition: color 0.2s ease;
  }

  .utility-bar__phone-link:hover {
    color: rgb(var(--color-foreground));
  }

  .utility-bar__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.6rem;
    height: 1.6rem;
  }

  .utility-bar__icon .icon {
    width: 1.4rem;
    height: 1.4rem;
  }

  .utility-bar__phone-number {
    font-weight: 400;
    letter-spacing: 0.01em;
  }

  @media screen and (max-width: 749px) {
    .utility-bar__phone-number {
      font-size: calc(var(--font-heading-scale) * 1.1rem);
    }
  }

  .utility-bar__message {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  .utility-bar__message-text {
    color: rgba(var(--color-foreground), 0.7);
    font-size: calc(var(--font-heading-scale) * 1.2rem);
    font-weight: 400;
    letter-spacing: 0.02em;
  }

  @media screen and (max-width: 749px) {
    .utility-bar__message {
      display: none;
    }
  }

  .utility-bar__workshops {
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }

  .utility-bar__workshops-link {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    text-decoration: none;
    color: rgba(var(--color-foreground), 0.85);
    font-size: calc(var(--font-heading-scale) * 1.2rem);
    transition: color 0.2s ease;
  }

  .utility-bar__workshops-link:hover {
    color: rgb(var(--color-foreground));
  }

  .utility-bar__workshops-text {
    font-weight: 400;
    letter-spacing: 0.01em;
  }

  .utility-bar__workshops-arrow {
    display: flex;
    align-items: center;
    width: 1.2rem;
    height: 1.2rem;
    transition: transform 0.2s ease;
  }

  .utility-bar__workshops-link:hover .utility-bar__workshops-arrow {
    transform: translateX(2px);
  }

  .utility-bar__workshops-arrow .icon {
    width: 1rem;
    height: 1rem;
  }

  @media screen and (max-width: 749px) {
    .utility-bar__workshops-link {
      font-size: calc(var(--font-heading-scale) * 1.1rem);
    }
  }

  /* Ensure sticky behavior with header */
  .utility-bar--contact + .section-header .header-wrapper {
    position: sticky;
    top: 0;
  }
</style>
{%- endif -%}

{% schema %}
{
  "name": "Workshop Contact Bar",
  "class": "announcement-bar-section",
  "enabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_utility_bar",
      "label": "Enable contact bar",
      "default": true
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-4"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "default": true,
      "label": "Show bottom border"
    },
    {
      "type": "header",
      "content": "Contact Information"
    },
    {
      "type": "text",
      "id": "phone_number",
      "label": "Phone number",
      "default": "+49 123 456 789",
      "info": "Enter phone number with country code. Will be clickable on mobile."
    },
    {
      "type": "header",
      "content": "Studio Message"
    },
    {
      "type": "text",
      "id": "studio_message",
      "label": "Studio message",
      "default": "Handmade workshops for families",
      "info": "A calm, human message about your studio. Hidden on mobile."
    },
    {
      "type": "header",
      "content": "Workshops Link"
    },
    {
      "type": "text",
      "id": "workshops_text",
      "label": "Workshops link text",
      "default": "View Workshops"
    },
    {
      "type": "url",
      "id": "workshops_link",
      "label": "Workshops page link"
    }
  ],
  "presets": [
    {
      "name": "Workshop Contact Bar"
    }
  ]
}
{% endschema %}
